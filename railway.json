{
  "$schema": "https://railway.app/railway.schema.json",
  "services": [
    {
      "name": "karakeep",
      "repo": "https://github.com/karakeep-app/karakeep",
      "env": {
        "BROWSER_WEB_URL": "http://${{chrome.RAILWAY_PRIVATE_DOMAIN}}:3000",
        "MEILI_ADDR": "http://${{meilisearch.RAILWAY_PRIVATE_DOMAIN}}:7700",
        "MEILI_MASTER_KEY": "${{meilisearch.MEILI_MASTER_KEY}}",
        "OPENAI_API_KEY": "",
        "API_KEY": "${{generate.secret(32)}}"
      },
      "volumes": [
        {
          "mountPath": "/data",
          "name": "karakeep-data"
        }
      ]
    },
    {
      "name": "meilisearch",
      "image": "getmeili/meilisearch:v1.8",
      "env": {
        "MEILI_MASTER_KEY": "${{generate.secret(32)}}"
      },
      "volumes": [
        {
          "mountPath": "/meili_data",
          "name": "meili-data"
        }
      ]
    },
    {
      "name": "chrome",
      "image": "browserless/chrome:latest"
    }
  ]
}
